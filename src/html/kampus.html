<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Informasi Jurusan Kampus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Fallback jika Chart.js tidak berhasil dimuat
        window.addEventListener('load', function() {
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js failed to load from CDN, trying alternative CDN...');
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js';
                script.onload = function() {
                    console.log('Chart.js loaded from alternative CDN');
                    // Re-initialize charts if needed
                    if (document.getElementById('dashboard').style.display !== 'none') {
                        setTimeout(() => initializeDashboardCharts(), 100);
                    }
                };
                document.head.appendChild(script);
            }
        });
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .sidebar-item {
            transition: all 0.3s ease;
        }
        
        .sidebar-item:hover {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
        }
        
        .sidebar-item.active {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .table-row:hover {
            background-color: #f9fafb;
        }
        
        .notification {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        
        .dark-mode .text-gray-800 {
            color: #e2e8f0;
        }
        
        .dark-mode .text-gray-600 {
            color: #cbd5e0;
        }
        
        .dark-mode .text-gray-500 {
            color: #a0aec0;
        }
        
        .dark-mode .text-gray-700 {
            color: #e2e8f0;
        }
        
        .dark-mode .bg-gray-50 {
            background-color: #2d3748;
        }
        
        .dark-mode .border-t {
            border-color: #4a5568;
        }
        
        .dark-mode .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, transparent 50%, rgba(59, 130, 246, 0.1) 50%);
            transform: rotate(45deg) translate(30px, -30px);
        }
        
        /* Fix for excessive spacing in empty containers */
        .overflow-x-auto {
            margin-bottom: 0 !important;
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Reduce excessive margins between sections */
        .page > div {
            margin-bottom: 1.5rem;
        }
        
        /* Ensure tables don't have excessive spacing */
        table {
            border-collapse: collapse;
            margin: 0;
        }
        
        /* Chart canvas styling - Fixed runaway height issue */
        canvas {
            max-width: 100%;
            max-height: 300px !important;
            width: 100% !important;
            height: 300px !important;
            display: block;
        }
        
        /* Specific chart canvas fixes */
        #ipkChart, #mahasiswaChart, #alumniYearChart, #alumniSectorChart {
            max-height: 300px !important;
            height: 300px !important;
            width: 100% !important;
        }
        
        /* Chart container styling */
        .chart-container {
            position: relative;
            height: 300px !important;
            width: 100%;
            overflow: hidden;
            min-height: 300px;
            max-height: 300px;
        }
        
        /* Chart parent containers */
        .bg-white.rounded-lg.p-6 {
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Sidebar -->
    <div class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg">
        <div class="flex flex-col h-full">
            <!-- Logo -->
            <div class="flex items-center justify-center h-16 px-4 bg-blue-600">
                <i class="fas fa-university text-white text-2xl mr-3"></i>
                <h1 class="text-xl font-bold text-white">SIJUR</h1>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 overflow-y-auto">
                <a href="#" onclick="showPage('dashboard')" class="sidebar-item active flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-tachometer-alt w-5 mr-3"></i>
                    Dashboard
                </a>
                <a href="#" onclick="showPage('mahasiswa')" class="sidebar-item flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-user-graduate w-5 mr-3"></i>
                    Data Mahasiswa
                </a>
                <a href="#" onclick="showPage('kurikulum')" class="sidebar-item flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-book-open w-5 mr-3"></i>
                    Kurikulum
                </a>
                <a href="#" onclick="showPage('penilaian')" class="sidebar-item flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-clipboard-check w-5 mr-3"></i>
                    Penilaian
                </a>
                <a href="#" onclick="showPage('alumni')" class="sidebar-item flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-users w-5 mr-3"></i>
                    Alumni
                </a>
                <a href="#" onclick="showPage('penelitian')" class="sidebar-item flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-microscope w-5 mr-3"></i>
                    Penelitian
                </a>
                <a href="#" onclick="showPage('laporan')" class="sidebar-item flex items-center px-4 py-3 mb-2 text-gray-700 rounded-lg">
                    <i class="fas fa-chart-bar w-5 mr-3"></i>
                    Laporan
                </a>
            </nav>
            
            <!-- User Profile -->
            <div class="px-4 py-4 border-t">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <img class="h-10 w-10 rounded-full" src="https://picsum.photos/seed/user/40/40.jpg" alt="User">
                    </div>
                    <div class="ml-3">
                        <p class="text-sm font-medium text-gray-700">Admin Jurusan</p>
                        <p class="text-xs text-gray-500">admin@univ.ac.id</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="ml-64">
        <!-- Top Bar -->
        <header class="bg-white shadow-sm">
            <div class="px-6 py-4 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800" id="pageTitle">Dashboard</h2>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="toggleDarkMode()" class="p-2 text-gray-600 hover:text-gray-900">
                        <i class="fas fa-moon text-xl"></i>
                    </button>
                    <button onclick="reloadCharts()" class="p-2 text-gray-600 hover:text-gray-900" title="Reload Charts">
                        <i class="fas fa-chart-bar text-xl"></i>
                    </button>
                    <button class="p-2 text-gray-600 hover:text-gray-900">
                        <i class="fas fa-bell text-xl"></i>
                        <span class="absolute top-4 right-4 h-2 w-2 bg-red-500 rounded-full"></span>
                    </button>
                    <button onclick="logout()" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition">
                        <i class="fas fa-sign-out-alt mr-2"></i>Keluar
                    </button>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <main class="p-6">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl p-6 card-shadow stat-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Total Mahasiswa</p>
                                <p class="text-3xl font-bold text-gray-800">1,234</p>
                                <p class="text-sm text-green-600 mt-1">
                                    <i class="fas fa-arrow-up"></i> 12% dari tahun lalu
                                </p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-lg">
                                <i class="fas fa-user-graduate text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 card-shadow stat-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Mata Kuliah Aktif</p>
                                <p class="text-3xl font-bold text-gray-800">56</p>
                                <p class="text-sm text-blue-600 mt-1">
                                    <i class="fas fa-arrow-up"></i> 8% dari semester lalu
                                </p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-lg">
                                <i class="fas fa-book-open text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 card-shadow stat-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Dosen Aktif</p>
                                <p class="text-3xl font-bold text-gray-800">45</p>
                                <p class="text-sm text-gray-600 mt-1">
                                    <i class="fas fa-minus"></i> Tetap
                                </p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-lg">
                                <i class="fas fa-chalkboard-teacher text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 card-shadow stat-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm">Penelitian Aktif</p>
                                <p class="text-3xl font-bold text-gray-800">23</p>
                                <p class="text-sm text-green-600 mt-1">
                                    <i class="fas fa-arrow-up"></i> 15% dari tahun lalu
                                </p>
                            </div>
                            <div class="bg-red-100 p-3 rounded-lg">
                                <i class="fas fa-microscope text-red-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <!-- Mahasiswa per Angkatan -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Mahasiswa per Angkatan</h3>
                        <canvas id="mahasiswaChart" width="400" height="300"></canvas>
                    </div>
                    
                    <!-- Distribusi IPK -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Distribusi IPK</h3>
                        <canvas id="ipkChart" width="400" height="300"></canvas>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Aktivitas Terbaru</h3>
                        <div class="space-y-4">
                            <div class="flex items-start space-x-3">
                                <div class="bg-blue-100 p-2 rounded-lg">
                                    <i class="fas fa-user-plus text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Mahasiswa baru ditambahkan</p>
                                    <p class="text-xs text-gray-500">Ahmad Pratama - 2 menit yang lalu</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="bg-green-100 p-2 rounded-lg">
                                    <i class="fas fa-file-alt text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Nilai ujian masuk</p>
                                    <p class="text-xs text-gray-500">IF101 - 15 menit yang lalu</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="bg-purple-100 p-2 rounded-lg">
                                    <i class="fas fa-microscope text-purple-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Penelitian baru dipublikasi</p>
                                    <p class="text-xs text-gray-500">Dr. Siti - 1 jam yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Kinerja Akademik</h3>
                        <div class="space-y-3">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-600">Tingkat Kelulusan</span>
                                    <span class="font-medium">92%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 92%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-600">Rata-rata IPK</span>
                                    <span class="font-medium">3.45</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 86%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-600">Mahasiswa Aktif</span>
                                    <span class="font-medium">98%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-purple-600 h-2 rounded-full" style="width: 98%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mahasiswa Page -->
            <div id="mahasiswa" class="page hidden">
                <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Data Mahasiswa</h3>
                        <button onclick="showModal('tambahMahasiswa')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                            <i class="fas fa-plus mr-2"></i>Tambah Mahasiswa
                        </button>
                    </div>
                    
                    <!-- Search and Filter -->
                    <div class="flex flex-wrap gap-4 mb-6">
                        <div class="flex-1 min-w-[200px]">
                            <input type="text" placeholder="Cari NIM atau Nama..." class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <select class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>Semua Angkatan</option>
                            <option>2020</option>
                            <option>2021</option>
                            <option>2022</option>
                            <option>2023</option>
                            <option>2024</option>
                        </select>
                        <select class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>Semua Status</option>
                            <option>Aktif</option>
                            <option>Cuti</option>
                            <option>Nonaktif</option>
                            <option>Lulus</option>
                        </select>
                    </div>
                    
                    <!-- Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NIM</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Angkatan</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IPK</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">202001001</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ahmad Pratama</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2020</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3.75</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                            Aktif
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Edit</button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">202101002</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Siti Nurhaliza</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2021</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3.85</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                            Aktif
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Edit</button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">202201003</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Budi Santoso</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2022</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3.65</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                            Cuti
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="flex items-center justify-between mt-6">
                        <p class="text-sm text-gray-700">
                            Menampilkan <span class="font-medium">1</span> sampai <span class="font-medium">10</span> dari <span class="font-medium">1,234</span> hasil
                        </p>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded hover:bg-gray-100">Sebelumnya</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded">1</button>
                            <button class="px-3 py-1 border rounded hover:bg-gray-100">2</button>
                            <button class="px-3 py-1 border rounded hover:bg-gray-100">3</button>
                            <button class="px-3 py-1 border rounded hover:bg-gray-100">Selanjutnya</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kurikulum Page -->
            <div id="kurikulum" class="page hidden">
                <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Manajemen Kurikulum</h3>
                        <button onclick="showModal('tambahMatkul')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                            <i class="fas fa-plus mr-2"></i>Tambah Mata Kuliah
                        </button>
                    </div>
                    
                    <!-- Curriculum Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-blue-50 p-6 rounded-lg">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-blue-800">Total SKS</h4>
                                <i class="fas fa-calculator text-blue-600 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-blue-900">144</p>
                            <p class="text-sm text-blue-700 mt-2">Untuk lulus Sarjana</p>
                        </div>
                        <div class="bg-green-50 p-6 rounded-lg">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-green-800">Mata Kuliah</h4>
                                <i class="fas fa-book text-green-600 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-green-900">56</p>
                            <p class="text-sm text-green-700 mt-2">Aktif semester ini</p>
                        </div>
                        <div class="bg-purple-50 p-6 rounded-lg">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-purple-800">Semester</h4>
                                <i class="fas fa-calendar-alt text-purple-600 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-purple-900">8</p>
                            <p class="text-sm text-purple-700 mt-2">Program Sarjana</p>
                        </div>
                    </div>
                    
                    <!-- Course List -->
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Daftar Mata Kuliah</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kode</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">SKS</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Semester</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dosen</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">IF101</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Pemrograman Web</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Dr. Ahmad</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Edit</button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">IF102</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Basis Data</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Prof. Siti</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Penilaian Page -->
            <div id="penilaian" class="page hidden">
                <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Sistem Penilaian</h3>
                        <button onclick="showModal('inputNilai')" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                            <i class="fas fa-plus mr-2"></i>Input Nilai
                        </button>
                    </div>
                    
                    <!-- Grade Distribution -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <i class="fas fa-medal text-green-600 text-2xl mb-2"></i>
                            <p class="text-sm text-green-800">A (4.0)</p>
                            <p class="text-xl font-bold text-green-900">23%</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <i class="fas fa-star text-blue-600 text-2xl mb-2"></i>
                            <p class="text-sm text-blue-800">B (3.0)</p>
                            <p class="text-xl font-bold text-blue-900">45%</p>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg text-center">
                            <i class="fas fa-thumbs-up text-yellow-600 text-2xl mb-2"></i>
                            <p class="text-sm text-yellow-800">C (2.0)</p>
                            <p class="text-xl font-bold text-yellow-900">25%</p>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg text-center">
                            <i class="fas fa-times-circle text-red-600 text-2xl mb-2"></i>
                            <p class="text-sm text-red-800">D/E (1.0)</p>
                            <p class="text-xl font-bold text-red-900">7%</p>
                        </div>
                    </div>
                    
                    <!-- Grade Input Form -->
                    <div class="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Input Nilai Perkuliahan</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mata Kuliah</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>Pemrograman Web (IF101)</option>
                                    <option>Basis Data (IF102)</option>
                                    <option>Algoritma (IF103)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kelas</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>A</option>
                                    <option>B</option>
                                    <option>C</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tipe Nilai</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>UTS</option>
                                    <option>UAS</option>
                                    <option>Tugas</option>
                                    <option>Quiz</option>
                                </select>
                            </div>
                        </div>
                        <button class="mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">
                            Lanjutkan Input Nilai
                        </button>
                    </div>
                    
                    <!-- Recent Grades -->
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Nilai Terbaru</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NIM</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mata Kuliah</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipe</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nilai</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Grade</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">202001001</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ahmad Pratama</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Pemrograman Web</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">UTS</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">85</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                            A
                                        </span>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">202101002</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Siti Nurhaliza</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Basis Data</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">UAS</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">92</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                            A
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Alumni Page -->
            <div id="alumni" class="page hidden">
                <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Tracking Alumni</h3>
                        <button onclick="showModal('tambahAlumni')" class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition">
                            <i class="fas fa-plus mr-2"></i>Tambah Data Alumni
                        </button>
                    </div>
                    
                    <!-- Alumni Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-blue-50 p-6 rounded-xl">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-blue-800">Total Alumni</h4>
                                <i class="fas fa-users text-blue-600 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-blue-900">3,456</p>
                            <p class="text-sm text-blue-700 mt-2">Sejak 2010</p>
                        </div>
                        <div class="bg-green-50 p-6 rounded-xl">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-green-800">Bekerja</h4>
                                <i class="fas fa-briefcase text-green-600 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-green-900">87%</p>
                            <p class="text-sm text-green-700 mt-2">Dalam 6 bulan</p>
                        </div>
                        <div class="bg-purple-50 p-6 rounded-xl">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-purple-800">Lanjut Studi</h4>
                                <i class="fas fa-graduation-cap text-purple-600 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-purple-900">23%</p>
                            <p class="text-sm text-purple-700 mt-2">S2/S3</p>
                        </div>
                    </div>
                    
                    <!-- Alumni Distribution -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">Distribusi Alumni per Tahun</h4>
                            <canvas id="alumniYearChart" width="400" height="300"></canvas>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">Sektor Pekerjaan</h4>
                            <canvas id="alumniSectorChart" width="400" height="300"></canvas>
                        </div>
                    </div>
                    
                    <!-- Alumni List -->
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Daftar Alumni</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NIM</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tahun Lulus</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Perusahaan</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Posisi</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">201601001</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Rudi Hermawan</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2020</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">PT. Tech Indonesia</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Software Engineer</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900">Detail</button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">201701002</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Maya Putri</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2021</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Universitas Negeri</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Asisten Dosen</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900">Detail</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Penelitian Page -->
            <div id="penelitian" class="page hidden">
                <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Manajemen Penelitian</h3>
                        <button onclick="showModal('tambahPenelitian')" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
                            <i class="fas fa-plus mr-2"></i>Tambah Penelitian
                        </button>
                    </div>
                    
                    <!-- Research Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-red-50 p-4 rounded-lg text-center">
                            <i class="fas fa-flask text-red-600 text-2xl mb-2"></i>
                            <p class="text-sm text-red-800">Penelitian Aktif</p>
                            <p class="text-xl font-bold text-red-900">23</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <i class="fas fa-newspaper text-blue-600 text-2xl mb-2"></i>
                            <p class="text-sm text-blue-800">Publikasi</p>
                            <p class="text-xl font-bold text-blue-900">156</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <i class="fas fa-award text-green-600 text-2xl mb-2"></i>
                            <p class="text-sm text-green-800">Penghargaan</p>
                            <p class="text-xl font-bold text-green-900">12</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg text-center">
                            <i class="fas fa-handshake text-purple-600 text-2xl mb-2"></i>
                            <p class="text-sm text-purple-800">Kolaborasi</p>
                            <p class="text-xl font-bold text-purple-900">34</p>
                        </div>
                    </div>
                    
                    <!-- Research List -->
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Daftar Penelitian</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kode</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Judul</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ketua</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tahun</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">R001</td>
                                    <td class="px-6 py-4 text-sm text-gray-900">Penerapan Machine Learning untuk Prediksi...</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Dr. Ahmad</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                            Selesai
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Laporan</button>
                                    </td>
                                </tr>
                                <tr class="table-row">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">R002</td>
                                    <td class="px-6 py-4 text-sm text-gray-900">Pengembangan Sistem Informasi...</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Prof. Siti</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                            Berjalan
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-blue-600 hover:text-blue-900 mr-3">Detail</button>
                                        <button class="text-green-600 hover:text-green-900">Progress</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Laporan Page -->
            <div id="laporan" class="page hidden">
                <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-6">Laporan Akademik</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-medium text-gray-800 mb-4">Pilih Jenis Laporan</h4>
                            <div class="space-y-3">
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="report" class="mr-3">
                                    <div>
                                        <p class="font-medium">Laporan Mahasiswa</p>
                                        <p class="text-sm text-gray-600">Data demografi dan akademik mahasiswa</p>
                                    </div>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="report" class="mr-3">
                                    <div>
                                        <p class="font-medium">Laporan Kurikulum</p>
                                        <p class="text-sm text-gray-600">Analisis kurikulum dan capaian pembelajaran</p>
                                    </div>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="report" class="mr-3">
                                    <div>
                                        <p class="font-medium">Laporan Penilaian</p>
                                        <p class="text-sm text-gray-600">Rekapitulasi nilai dan statistik akademik</p>
                                    </div>
                                </label>
                                <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="report" class="mr-3">
                                    <div>
                                        <p class="font-medium">Laporan Alumni</p>
                                        <p class="text-sm text-gray-600">Tracking dan analisis karir alumni</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-lg font-medium text-gray-800 mb-4">Filter Laporan</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Periode</label>
                                    <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option>Semester Ganjil 2024</option>
                                        <option>Semester Genap 2024</option>
                                        <option>Tahun Akademik 2023/2024</option>
                                        <option>Kustom</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Program Studi</label>
                                    <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option>Teknik Informatika</option>
                                        <option>Sistem Informasi</option>
                                        <option>Semua Prodi</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Format</label>
                                    <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option>PDF</option>
                                        <option>Excel</option>
                                        <option>CSV</option>
                                    </select>
                                </div>
                                <button class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-600 transition">
                                    <i class="fas fa-download mr-2"></i>Generate Laporan
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Reports -->
                    <div class="mt-8">
                        <h4 class="text-lg font-medium text-gray-800 mb-4">Laporan Terbaru</h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div class="flex items-center">
                                    <i class="fas fa-file-pdf text-red-600 text-2xl mr-4"></i>
                                    <div>
                                        <p class="font-medium">Laporan Mahasiswa Semester Ganjil 2024.pdf</p>
                                        <p class="text-sm text-gray-600">Generated: 15 Nov 2024</p>
                                    </div>
                                </div>
                                <button class="text-blue-600 hover:text-blue-900">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div class="flex items-center">
                                    <i class="fas fa-file-excel text-green-600 text-2xl mr-4"></i>
                                    <div>
                                        <p class="font-medium">Rekapitulasi Nilai Oktober 2024.xlsx</p>
                                        <p class="text-sm text-gray-600">Generated: 1 Nov 2024</p>
                                    </div>
                                </div>
                                <button class="text-blue-600 hover:text-blue-900">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 id="modalTitle" class="text-2xl font-bold text-gray-800">Tambah Data</h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="modalForm">
                    <!-- Dynamic content will be inserted here -->
                </form>
            </div>
        </div>
    </div>

    <script>
        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.remove('hidden');
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'mahasiswa': 'Data Mahasiswa',
                'kurikulum': 'Manajemen Kurikulum',
                'penilaian': 'Sistem Penilaian',
                'alumni': 'Tracking Alumni',
                'penelitian': 'Manajemen Penelitian',
                'laporan': 'Laporan Akademik'
            };
            document.getElementById('pageTitle').textContent = titles[pageId];
            
            // Update active sidebar item
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            if (event && event.target) {
                event.target.closest('.sidebar-item').classList.add('active');
            }
            
            // Clean up existing charts before showing new page
            console.log('Cleaning up charts before page switch...');
            Object.keys(chartInstances).forEach(key => {
                if (chartInstances[key]) {
                    chartInstances[key].destroy();
                }
            });
            chartInstances = {};
            
            // Initialize charts if needed
            if (pageId === 'dashboard') {
                setTimeout(() => {
                    console.log('Initializing dashboard charts...');
                    initializeDashboardCharts();
                }, 300);
            } else if (pageId === 'alumni') {
                setTimeout(() => {
                    console.log('Initializing alumni charts...');
                    initializeAlumniCharts();
                }, 300);
            }
        }

        // Modal Functions
        function showModal(type) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalForm = document.getElementById('modalForm');
            
            // Set modal content based on type
            switch(type) {
                case 'tambahMahasiswa':
                    modalTitle.textContent = 'Tambah Mahasiswa';
                    modalForm.innerHTML = `
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">NIM</label>
                                    <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Masukkan NIM">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Angkatan</label>
                                    <input type="number" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="2024">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Masukkan nama lengkap">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="email@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">No. HP</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="08xxxxxxxxxx">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'tambahMatkul':
                    modalTitle.textContent = 'Tambah Mata Kuliah';
                    modalForm.innerHTML = `
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kode Mata Kuliah</label>
                                    <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Contoh: IF101">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">SKS</label>
                                    <input type="number" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="3">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Mata Kuliah</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Masukkan nama mata kuliah">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Semester</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Dosen Pengampu</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option>Dr. Ahmad</option>
                                    <option>Prof. Siti</option>
                                    <option>Dr. Budi</option>
                                </select>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'inputNilai':
                    modalTitle.textContent = 'Input Nilai Mahasiswa';
                    modalForm.innerHTML = `
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mata Kuliah</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>Pemrograman Web (IF101)</option>
                                    <option>Basis Data (IF102)</option>
                                    <option>Algoritma (IF103)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mahasiswa</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>Ahmad Pratama (202001001)</option>
                                    <option>Siti Nurhaliza (202101002)</option>
                                    <option>Budi Santoso (202201003)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tipe Nilai</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>UTS</option>
                                    <option>UAS</option>
                                    <option>Tugas</option>
                                    <option>Quiz</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nilai Angka</label>
                                <input type="number" min="0" max="100" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="0-100">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'tambahAlumni':
                    modalTitle.textContent = 'Tambah Data Alumni';
                    modalForm.innerHTML = `
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">NIM</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="Masukkan NIM">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nama</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="Masukkan nama alumni">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tahun Lulus</label>
                                <input type="number" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="2020">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Perusahaan</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="Nama perusahaan">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Posisi/Jabatan</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="Posisi pekerjaan">
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'tambahPenelitian':
                    modalTitle.textContent = 'Tambah Penelitian';
                    modalForm.innerHTML = `
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kode Penelitian</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="Contoh: R001">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Judul Penelitian</label>
                                <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="Masukkan judul penelitian">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ketua Peneliti</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                    <option>Dr. Ahmad</option>
                                    <option>Prof. Siti</option>
                                    <option>Dr. Budi</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                                <select class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                    <option>Perencanaan</option>
                                    <option>Berjalan</option>
                                    <option>Selesai</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tahun</label>
                                <input type="number" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="2024">
                            </div>
                        </div>
                    `;
                    break;
            }
            
            // Add submit button
            modalForm.innerHTML += `
                <div class="flex gap-4 mt-6">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition">
                        Simpan
                    </button>
                    <button type="button" onclick="closeModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-medium hover:bg-gray-400 transition">
                        Batal
                    </button>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }

        // Form submission
        document.getElementById('modalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Show success notification
            showNotification('Data berhasil disimpan!', 'success');
            closeModal();
        });

        // Notification function
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 notification ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'} mr-2"></i>
                    ${message}
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Chart instances storage
        let chartInstances = {};

        // Initialize Dashboard Charts
        function initializeDashboardCharts() {
            try {
                // Check if Chart.js is loaded
                if (typeof Chart === 'undefined') {
                    console.error('Chart.js is not loaded');
                    return;
                }

                // Destroy existing charts to prevent conflicts
                Object.keys(chartInstances).forEach(key => {
                    if (chartInstances[key]) {
                        chartInstances[key].destroy();
                    }
                });
                chartInstances = {};

                // Mahasiswa per Angkatan Chart
                const mahasiswaCanvas = document.getElementById('mahasiswaChart');
                if (mahasiswaCanvas) {
                    // Clear and reset canvas dimensions
                    mahasiswaCanvas.width = 400;
                    mahasiswaCanvas.height = 300;
                    mahasiswaCanvas.style.width = '100%';
                    mahasiswaCanvas.style.height = '300px';
                    
                    const mahasiswaCtx = mahasiswaCanvas.getContext('2d');
                    chartInstances.mahasiswa = new Chart(mahasiswaCtx, {
                        type: 'bar',
                        data: {
                            labels: ['2020', '2021', '2022', '2023', '2024'],
                            datasets: [{
                                label: 'Jumlah Mahasiswa',
                                data: [180, 220, 250, 280, 304],
                                backgroundColor: '#3b82f6',
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: 'rgba(0,0,0,0.1)'
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                }

                // Distribusi IPK Chart
                const ipkCanvas = document.getElementById('ipkChart');
                if (ipkCanvas) {
                    // Clear and reset canvas dimensions to fix runaway height
                    ipkCanvas.width = 400;
                    ipkCanvas.height = 300;
                    ipkCanvas.style.width = '100%';
                    ipkCanvas.style.height = '300px';
                    
                    const ipkCtx = ipkCanvas.getContext('2d');
                    chartInstances.ipk = new Chart(ipkCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['3.5 - 4.0', '3.0 - 3.5', '2.5 - 3.0', '2.0 - 2.5', '< 2.0'],
                            datasets: [{
                                data: [23, 45, 20, 10, 2],
                                backgroundColor: [
                                    '#10b981',
                                    '#3b82f6',
                                    '#f59e0b',
                                    '#ef4444',
                                    '#6b7280'
                                ],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        padding: 20,
                                        usePointStyle: true
                                    }
                                }
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Error initializing dashboard charts:', error);
            }
        }

        // Initialize Alumni Charts
        function initializeAlumniCharts() {
            try {
                // Check if Chart.js is loaded
                if (typeof Chart === 'undefined') {
                    console.error('Chart.js is not loaded');
                    return;
                }

                // Destroy existing alumni charts to prevent conflicts
                if (chartInstances.alumniYear) chartInstances.alumniYear.destroy();
                if (chartInstances.alumniSector) chartInstances.alumniSector.destroy();

                // Alumni per Tahun Chart
                const alumniYearCanvas = document.getElementById('alumniYearChart');
                if (alumniYearCanvas) {
                    // Clear and reset canvas dimensions
                    alumniYearCanvas.width = 400;
                    alumniYearCanvas.height = 300;
                    alumniYearCanvas.style.width = '100%';
                    alumniYearCanvas.style.height = '300px';
                    
                    const alumniYearCtx = alumniYearCanvas.getContext('2d');
                    chartInstances.alumniYear = new Chart(alumniYearCtx, {
                        type: 'line',
                        data: {
                            labels: ['2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                            datasets: [{
                                label: 'Jumlah Alumni',
                                data: [320, 340, 380, 420, 450, 480, 510],
                                borderColor: '#3b82f6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4,
                                fill: true,
                                pointBackgroundColor: '#3b82f6',
                                pointBorderColor: '#ffffff',
                                pointBorderWidth: 2
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: 'rgba(0,0,0,0.1)'
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                }

                // Sektor Pekerjaan Chart
                const alumniSectorCanvas = document.getElementById('alumniSectorChart');
                if (alumniSectorCanvas) {
                    // Clear and reset canvas dimensions
                    alumniSectorCanvas.width = 400;
                    alumniSectorCanvas.height = 300;
                    alumniSectorCanvas.style.width = '100%';
                    alumniSectorCanvas.style.height = '300px';
                    
                    const alumniSectorCtx = alumniSectorCanvas.getContext('2d');
                    chartInstances.alumniSector = new Chart(alumniSectorCtx, {
                        type: 'pie',
                        data: {
                            labels: ['Teknologi', 'Pendidikan', 'Pemerintahan', 'Swasta', 'Wirausaha'],
                            datasets: [{
                                data: [35, 20, 15, 20, 10],
                                backgroundColor: [
                                    '#3b82f6',
                                    '#10b981',
                                    '#f59e0b',
                                    '#ef4444',
                                    '#8b5cf6'
                                ],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        padding: 20,
                                        usePointStyle: true
                                    }
                                }
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Error initializing alumni charts:', error);
            }
        }

        // Function to force reload charts (for debugging)
        function reloadCharts() {
            console.log('Reloading charts...');
            
            // Destroy all existing charts first
            Object.keys(chartInstances).forEach(key => {
                if (chartInstances[key]) {
                    console.log(`Destroying chart: ${key}`);
                    chartInstances[key].destroy();
                }
            });
            chartInstances = {};
            
            // Wait a moment for cleanup, then reinitialize
            setTimeout(() => {
                const currentPage = document.querySelector('.page:not(.hidden)').id;
                console.log(`Reinitializing charts for page: ${currentPage}`);
                
                if (currentPage === 'dashboard') {
                    initializeDashboardCharts();
                } else if (currentPage === 'alumni') {
                    initializeAlumniCharts();
                }
            }, 100);
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        function logout() {
            if (confirm('Apakah Anda yakin ingin keluar?')) {
                showNotification('Anda telah keluar dari sistem', 'info');
                setTimeout(() => {
                    window.location.href = '#';
                }, 1500);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for Chart.js to load before initializing
            if (typeof Chart !== 'undefined') {
                showPage('dashboard');
            } else {
                // Wait a bit more for Chart.js to load
                setTimeout(() => {
                    showPage('dashboard');
                }, 500);
            }
        });
    </script>
</body>
</html>